# Rule for legitimate ACME Challenge requests
location ^~ /.well-known/acme-challenge/ {
    allow all;
    default_type "text/plain";
    alias /tmp/acme-challenge/;
}

# Hide /acme-challenge subdirectory and return 404 on all requests.
location = /.well-known/acme-challenge/ {
    return 404;
}
