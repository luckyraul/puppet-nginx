  location / {
<%- if @http_auth -%>
    auth_basic <%= @http_auth_var %>;
<% end -%>
<%- if @http_auth && @http_auth_file -%>
    auth_basic_user_file <%= @http_auth_file %>;
<% end -%>
    proxy_pass <%= @proxy %>;
<% if @proxy_limit_req -%>
    limit_req zone=<%= @proxy_limit_req %><% if @proxy_limit_req_burst -%> burst=<%= @proxy_limit_req_burst %><% end -%><% if @proxy_limit_req_delay -%> nodelay<% end -%>;
<% end -%>
<% if @proxy_limit_req_status -%>
    limit_req_status=<%= @proxy_limit_req_status %>;
<% end -%>
<% if @proxy_read_timeout -%>
    proxy_read_timeout <%= @proxy_read_timeout %>;
<% end -%>
<% unless @proxy_set_header.nil? -%>
    <%- @proxy_set_header.each do |header| -%>
    proxy_set_header <%= header %>;
    <%- end -%>
<% end -%>
  }
